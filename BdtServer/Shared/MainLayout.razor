@using BdtServer.AppServices.App;
@using BdtServer.AppServices.Theme;
@using BdtShared.Models.App;

@inherits LayoutComponentBase
@inject NavigationManager _navigation
@inject BdtServer.AppServices.Theme.ThemeService _themeService
@inject IAppService _appService

<MudThemeProvider Theme="@_themeService.CurrentTheme" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />
@if (Setting.UserBasicDetail is not null && !Setting.UserBasicDetail.IsFirstLogin)
{
    <MudLayout>

        <MudAppBar Class="justify-end">
            <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="MudBlazor.Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />
            <MudSpacer />
            <MudImage Src="images/max_only_white_small.png" Alt="Busy Dad Training" Height="100" />
            <MudSpacer />
            <MudSwitch T="bool" Style="margin:0"  ThumbIcon="@Icons.Material.Filled.LightMode" Size="MudBlazor.Size.Medium" Color="MudBlazor.Color.Primary"></MudSwitch>
        </MudAppBar>
        <MudDrawer @bind-Open="@DrawerIsOpen">
            <NavMenu />
        </MudDrawer>

        <MudMainContent>
            @Body
        </MudMainContent>
    </MudLayout>
}
else
{
    @Body
}

@code {
    private bool DrawerIsOpen = true;
    private string LogoPath;

    void DrawerToggle()
    {
        DrawerIsOpen = !DrawerIsOpen;
    }
}
